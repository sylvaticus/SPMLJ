<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>0202x EXERCISE-2.2 Â· SPMLJ</title><script async src="https://www.googletagmanager.com/gtag/js?id=G-Q39LHCRBB6"></script><script>  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-Q39LHCRBB6', {'page_path': location.pathname + location.search + location.hash});
</script><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/custom.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../index.html">SPMLJ</a></span></div><form class="docs-search" action="../search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../index.html">Index</a></li><li><span class="tocitem">Lessons</span><ul><li><input class="collapse-toggle" id="menuitem-2-1" type="checkbox"/><label class="tocitem" for="menuitem-2-1"><span class="docs-label">INTRO - Introduction to the course, Julia and ML</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../00_-_INTRO_-_Introduction_julia_ml/0001_-_Course_presentation.html">0001 - Course presentation</a></li><li><a class="tocitem" href="../00_-_INTRO_-_Introduction_julia_ml/0002_-_Program.html">0002 - Program</a></li><li><a class="tocitem" href="../00_-_INTRO_-_Introduction_julia_ml/0003_-_Introduction_to_Julia.html">0003 - Introduction to Julia</a></li><li><a class="tocitem" href="../00_-_INTRO_-_Introduction_julia_ml/0003q_-_QUIZ_0.1.html">0003q - QUIZ 0.1</a></li><li><a class="tocitem" href="../00_-_INTRO_-_Introduction_julia_ml/0004_-_Introduction_to_ML.html">0004 - Introduction to ML</a></li><li><a class="tocitem" href="../00_-_INTRO_-_Introduction_julia_ml/0004q_-_QUIZ_0.2.html">0004q - QUIZ 0.2</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-2" type="checkbox"/><label class="tocitem" for="menuitem-2-2"><span class="docs-label">JULIA1 - Basic Julia programming</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../01_-_JULIA1_-_Basic_Julia_programming/0101_-_Basic_syntax.html">0101 - Basic syntax</a></li><li><a class="tocitem" href="../01_-_JULIA1_-_Basic_Julia_programming/0101q_-_QUIZ_1.1.html">0101q - QUIZ 1.1</a></li><li><a class="tocitem" href="../01_-_JULIA1_-_Basic_Julia_programming/0101q_-_QUIZ_1.2.html">0101q - QUIZ 1.2</a></li><li><a class="tocitem" href="../01_-_JULIA1_-_Basic_Julia_programming/0102_-_Types_and_objects.html">0102 - Types and objects</a></li><li><a class="tocitem" href="../01_-_JULIA1_-_Basic_Julia_programming/0102q_-_QUIZ_1.3.html">0102q - QUIZ 1.3</a></li><li><a class="tocitem" href="../01_-_JULIA1_-_Basic_Julia_programming/0103_-_Predefined_types.html">0103 - Predefined types</a></li><li><a class="tocitem" href="../01_-_JULIA1_-_Basic_Julia_programming/0103q_-_QUIZ_1.4.html">0103q - QUIZ 1.4</a></li><li><a class="tocitem" href="../01_-_JULIA1_-_Basic_Julia_programming/0103q_-_QUIZ_1.5.html">0103q - QUIZ 1.5</a></li><li><a class="tocitem" href="../01_-_JULIA1_-_Basic_Julia_programming/0103q_-_QUIZ_1.6.html">0103q - QUIZ 1.6</a></li><li><a class="tocitem" href="../01_-_JULIA1_-_Basic_Julia_programming/0104_-_Control_flow_and_functions.html">0104 - Control flow and functions</a></li><li><a class="tocitem" href="../01_-_JULIA1_-_Basic_Julia_programming/0104q_-_QUIZ_1.7.html">0104q - QUIZ 1.7</a></li><li><a class="tocitem" href="../01_-_JULIA1_-_Basic_Julia_programming/0104q_-_QUIZ_1.8.html">0104q - QUIZ 1.8</a></li><li><a class="tocitem" href="../01_-_JULIA1_-_Basic_Julia_programming/0105_-_Custom_types.html">0105 - Custom types</a></li><li><a class="tocitem" href="../01_-_JULIA1_-_Basic_Julia_programming/0105q_-_QUIZ_1.10.html">0105q - QUIZ 1.10</a></li><li><a class="tocitem" href="../01_-_JULIA1_-_Basic_Julia_programming/0105q_-_QUIZ_1.9.html">0105q - QUIZ 1.9</a></li><li><a class="tocitem" href="../01_-_JULIA1_-_Basic_Julia_programming/0105x_EXERCISE-1.1.html">0105x EXERCISE-1.1</a></li><li><a class="tocitem" href="../01_-_JULIA1_-_Basic_Julia_programming/0106_-_Further_topics.html">0106 - Further topics</a></li><li><a class="tocitem" href="../01_-_JULIA1_-_Basic_Julia_programming/0106q_-_QUIZ_1.11.html">0106q - QUIZ 1.11</a></li><li><a class="tocitem" href="../01_-_JULIA1_-_Basic_Julia_programming/0106q_-_QUIZ_1.12.html">0106q - QUIZ 1.12</a></li><li><a class="tocitem" href="../01_-_JULIA1_-_Basic_Julia_programming/0106q_-_QUIZ_1.13.html">0106q - QUIZ 1.13</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-3" type="checkbox" checked/><label class="tocitem" for="menuitem-2-3"><span class="docs-label">JULIA2 - Scientific programming with Julia</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="0201_-_Wranging_data.html">0201 - Wranging data</a></li><li><a class="tocitem" href="0202_-_Miscellaneous_topics.html">0202 - Miscellaneous topics</a></li><li><a class="tocitem" href="0202x_EXERCISE-2.1.html">0202x EXERCISE-2.1</a></li><li class="is-active"><a class="tocitem" href="0202x_EXERCISE-2.2.html">0202x EXERCISE-2.2</a><ul class="internal"><li><a class="tocitem" href="#Instructions"><span>Instructions</span></a></li><li><a class="tocitem" href="#Resolution"><span>Resolution</span></a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-4" type="checkbox"/><label class="tocitem" for="menuitem-2-4"><span class="docs-label">ML1 - Introduction to Machine Learning</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../03_-_ML1_-_Introduction_to_Machine_Learning/0301_-_Machine_learning_main_concepts.html">0301 - Machine learning main concepts</a></li><li><a class="tocitem" href="../03_-_ML1_-_Introduction_to_Machine_Learning/0302_-_The_Perceptron_classifier.html">0302 - The Perceptron classifier</a></li><li><a class="tocitem" href="../03_-_ML1_-_Introduction_to_Machine_Learning/0302x_EXERCISE-3.1.html">0302x EXERCISE-3.1</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-5" type="checkbox"/><label class="tocitem" for="menuitem-2-5"><span class="docs-label">NN - Neural Networks</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../04_-_NN_-_Neural_Networks/0401_-_Neural_network_architectures.html">0401 - Neural network architectures</a></li><li><a class="tocitem" href="../04_-_NN_-_Neural_Networks/0402_-_Implementation_of_neural_networks_workflows.html">0402 - Implementation of neural networks workflows</a></li><li><a class="tocitem" href="../04_-_NN_-_Neural_Networks/0402x_EXERCISE-4.1.html">0402x EXERCISE-4.1</a></li><li><a class="tocitem" href="../04_-_NN_-_Neural_Networks/0402x_EXERCISE-4.2.html">0402x EXERCISE-4.2</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-6" type="checkbox"/><label class="tocitem" for="menuitem-2-6"><span class="docs-label">DT - Decision trees based algorithms [DRAFT]</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../05_-_DT_-_Decision_trees_based_algorithms/0501_-_Decision_trees_based_algorithms.html">0501 - Decision trees based algorithms</a></li><li><a class="tocitem" href="../05_-_DT_-_Decision_trees_based_algorithms/0502x_EXERCISE-5.1.html">0502x EXERCISE-5.1</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Lessons</a></li><li><a class="is-disabled">JULIA2 - Scientific programming with Julia</a></li><li class="is-active"><a href="0202x_EXERCISE-2.2.html">0202x EXERCISE-2.2</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="0202x_EXERCISE-2.2.html">0202x EXERCISE-2.2</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/sylvaticus/SPMLJ/blob/master/lessonsSources/02_-_JULIA2_-_Scientific_programming_with_Julia/0202x_EXERCISE-2.2.md" title="Edit on GitHub"><span class="docs-icon fab">ï‚›</span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="EXERCISE-2.2:-The-profit-maximisation-problem"><a class="docs-heading-anchor" href="#EXERCISE-2.2:-The-profit-maximisation-problem">EXERCISE 2.2: The profit maximisation problem</a><a id="EXERCISE-2.2:-The-profit-maximisation-problem-1"></a><a class="docs-heading-anchor-permalink" href="#EXERCISE-2.2:-The-profit-maximisation-problem" title="Permalink"></a></h1><p>&nbsp;</p>
<img src="imgs/optimisationProblem.png" alt="The optimisation problem" style="height:230px;"> 
<!-- <img src="imgs/harvestingDecisions.jpg" alt="The harvesting decision problem" style="height:220px;">  -->
<img src="imgs/numericalProblem.png" alt="Numerical problem" style="height:230px;">  
<img src="imgs/numericalResolution.png" alt="Numerical resolution" style="height:230px;">
<p>&nbsp;</p><p>You are the decision-maker of a production unit (here a logging company) and have a set of possible activities to undergo. How do you choose the activities that lead to a maximisation of the unit&#39;s profit? </p><p>The objective of this problem is hence to find the optimal level of activities to maximise the company profit, given (a) the profitability (gross margin) of each activity, (b) the resources available to the company and (c) the matrix of technical coefficients that link each activity to the resources required (positive coefficient) or provided (negative coefficient) by that specific activity.</p><p>The problem is the same as those in the SpreadSheet file &quot;Optimal production mix.ods&quot; (available in the <code>data</code> folder) and can be solved in LibreOffice by using the &quot;Solver tool&quot; as indicated in that file. You can use it to check your results.</p><p><strong>Skills employed:</strong></p><ul><li>download and import data from internet</li><li>define, solve and retriever optimal values of an optimisation problem using the <a href="https://jump.dev/">JuMP</a> <a href="https://en.wikipedia.org/wiki/Algebraic_modeling_language">algebraic modelling language</a></li></ul><h2 id="Instructions"><a class="docs-heading-anchor" href="#Instructions">Instructions</a><a id="Instructions-1"></a><a class="docs-heading-anchor-permalink" href="#Instructions" title="Permalink"></a></h2><p>If you have already cloned or downloaded the whole <a href="https://github.com/sylvaticus/SPMLJ/">course repository</a> the folder with the exercise is on <code>[REPOSITORY_ROOT]/lessonsMaterial/02_JULIA2/loggingOptimisation</code>. Otherwise download a zip of just that folder <a href="https://downgit.github.io/#/home?url=https://github.com/sylvaticus/SPMLJ/tree/main/lessonsMaterial/02_JULIA2/loggingOptimisation">here</a>.</p><p>In the folder you will find the file <code>loggingOptimisation.jl</code> containing the julia file that <strong>you will have to complete to implement and run the model</strong> (follow the instructions on that file).  In that folder you will also find the <code>Manifest.toml</code> file. The proposal of resolution below has been tested with the environment defined by that file.   If you are stuck and you don&#39;t want to lookup to the resolution above you can also ask for help in the forum at the bottom of this page. Good luck! </p><h2 id="Resolution"><a class="docs-heading-anchor" href="#Resolution">Resolution</a><a id="Resolution-1"></a><a class="docs-heading-anchor-permalink" href="#Resolution" title="Permalink"></a></h2><p>Click &quot;ONE POSSIBLE SOLUTION&quot; to get access to (one possible) solution for each part of the code that you are asked to implement.</p><hr/><h3 id=")-Set-up-the-environment..."><a class="docs-heading-anchor" href="#)-Set-up-the-environment...">1) Set up the environment...</a><a id=")-Set-up-the-environment...-1"></a><a class="docs-heading-anchor-permalink" href="#)-Set-up-the-environment..." title="Permalink"></a></h3><p>Start by setting the working directory to the directory of this file and activate it. If you have the provided <code>Manifest.toml</code> file in the directory, just run <code>Pkg.instantiate()</code>, otherwise manually add the packages <code>JuMP</code>, <code>GLPK</code>, <code>DataFrames</code>, <code>CSV</code>, <code>Pipe</code>, <code>HTTP</code>.</p><details><summary>ONE POSSIBLE SOLUTION</summary><pre><code class="language-julia hljs">cd(@__DIR__)         
using Pkg             
Pkg.activate(&quot;.&quot;)   
# If using a Julia version different than 1.7 please uncomment and run the following line (reproductibility guarantee will hower be lost)
# Pkg.resolve()   
Pkg.instantiate() 
using Random
Random.seed!(123)</code></pre></details><h3 id=")-Load-the-packages"><a class="docs-heading-anchor" href="#)-Load-the-packages">2) Load the packages</a><a id=")-Load-the-packages-1"></a><a class="docs-heading-anchor-permalink" href="#)-Load-the-packages" title="Permalink"></a></h3><p>Load the packages DelimitedFiles, JuMP, GLPK, DataFrames, CSV, Pipe, HTTP</p><details><summary>ONE POSSIBLE SOLUTION</summary><pre><code class="language-julia hljs">using DelimitedFiles, JuMP, GLPK, DataFrames, CSV, Pipe, HTTP</code></pre></details><h3 id=")-Load-the-data"><a class="docs-heading-anchor" href="#)-Load-the-data">3) Load the data</a><a id=")-Load-the-data-1"></a><a class="docs-heading-anchor-permalink" href="#)-Load-the-data" title="Permalink"></a></h3><p>Load from internet or from local files the following data:</p><pre><code class="language-julia hljs">urlActivities   = &quot;https://raw.githubusercontent.com/sylvaticus/IntroSPMLJuliaCourse/main/lessonsMaterial/02_JULIA2/loggingOptimisation/data/activities.csv&quot;
urlResources    = &quot;https://raw.githubusercontent.com/sylvaticus/IntroSPMLJuliaCourse/main/lessonsMaterial/02_JULIA2/loggingOptimisation/data/resources.csv&quot;
urlCoefficients = &quot;https://raw.githubusercontent.com/sylvaticus/IntroSPMLJuliaCourse/main/lessonsMaterial/02_JULIA2/loggingOptimisation/data/coefficients.csv&quot;</code></pre><p>The result must be:</p><ul><li><code>activities</code>, a dataframe with the columns <code>label</code>, <code>gm</code> and <code>integer</code></li><li><code>resources</code>, a dataframe with the columns <code>label</code>, <code>initial</code> and <code>initial2</code></li><li><code>coeff</code>, a 10x12 Matrix of <code>Float64</code></li></ul><p>For example to download from internet and import the matrix you can use something like:</p><pre><code class="language-julia hljs">coef  = @pipe HTTP.get(urlCoefficients).body |&gt; readdlm(_,&#39;;&#39;)</code></pre><details><summary>ONE POSSIBLE SOLUTION</summary><pre><code class="language-julia hljs">activities = @pipe HTTP.get(urlActivities).body   |&gt; CSV.File(_) |&gt; DataFrame
resources  = @pipe HTTP.get(urlResources).body    |&gt; CSV.File(_) |&gt; DataFrame
coef       = @pipe HTTP.get(urlCoefficients).body |&gt; readdlm(_,&#39;;&#39;)</code></pre></details><h3 id=")-Find-the-problem-size"><a class="docs-heading-anchor" href="#)-Find-the-problem-size">4) Find the problem size</a><a id=")-Find-the-problem-size-1"></a><a class="docs-heading-anchor-permalink" href="#)-Find-the-problem-size" title="Permalink"></a></h3><p>Determine <code>nA</code> and <code>nR</code> as the number of activities and the number of resources (use the <code>size</code> function)</p><details><summary>ONE POSSIBLE SOLUTION</summary><pre><code class="language-julia hljs">(nA, nR) = (size(activities,1), size(resources,1)) </code></pre></details><h3 id=")-Define-the-solver-engine"><a class="docs-heading-anchor" href="#)-Define-the-solver-engine">5) Define the solver engine</a><a id=")-Define-the-solver-engine-1"></a><a class="docs-heading-anchor-permalink" href="#)-Define-the-solver-engine" title="Permalink"></a></h3><p>Define <code>profitModel</code> as a model to be optimised using the <code>GLPK.Optimizer</code></p><details><summary>ONE POSSIBLE SOLUTION</summary><pre><code class="language-julia hljs">profitModel = Model(GLPK.Optimizer)</code></pre></details><h3 id=")-Set-solver-engine-specific-options"><a class="docs-heading-anchor" href="#)-Set-solver-engine-specific-options">6) Set solver engine specific options</a><a id=")-Set-solver-engine-specific-options-1"></a><a class="docs-heading-anchor-permalink" href="#)-Set-solver-engine-specific-options" title="Permalink"></a></h3><p>[OPTIONAL] set <code>GLPK.GLP_MSG_ALL</code> as the <code>msg_lev</code> of GLPK</p><details><summary>ONE POSSIBLE SOLUTION</summary><pre><code class="language-julia hljs">set_optimizer_attribute(profitModel, &quot;msg_lev&quot;, GLPK.GLP_MSG_ALL)</code></pre></details><h3 id=")-Define-the-model&#39;s-endogenous-variables"><a class="docs-heading-anchor" href="#)-Define-the-model&#39;s-endogenous-variables">7) Define the model&#39;s endogenous variables</a><a id=")-Define-the-model&#39;s-endogenous-variables-1"></a><a class="docs-heading-anchor-permalink" href="#)-Define-the-model&#39;s-endogenous-variables" title="Permalink"></a></h3><p>Define the non-negative model <code>x</code> variable, indexed by the positions between 1 and <code>nA</code> (i.e. <code>x[1:nA] &gt;= 0</code>) (you could use the @variables macro). Don&#39;t set the <code>x</code> variable to be integer at this step, as some variables are continuous, just set them to be non-negative.</p><details><summary>ONE POSSIBLE SOLUTION</summary><pre><code class="language-julia hljs">@variables profitModel begin
    x[1:nA] &gt;= 0
end
</code></pre></details><h3 id=")-Define-the-integer-constraints"><a class="docs-heading-anchor" href="#)-Define-the-integer-constraints">8) Define the integer constraints</a><a id=")-Define-the-integer-constraints-1"></a><a class="docs-heading-anchor-permalink" href="#)-Define-the-integer-constraints" title="Permalink"></a></h3><p>Set the variables for which the corresponding <code>integer</code> column in the <code>activity</code> dataframe is equal to 1 as a integer variable. To set the specific vaciable <code>x[a]</code> as integer use  <code>set_integer(x[a])</code></p><details><summary>ONE POSSIBLE SOLUTION</summary><pre><code class="language-julia hljs">for a in 1:nA
    if activities.integer[a] == 1
        set_integer(x[a])
    end
end</code></pre></details><h3 id=")-Define-the-other-model-constraints"><a class="docs-heading-anchor" href="#)-Define-the-other-model-constraints">9) Define the other model constraints</a><a id=")-Define-the-other-model-constraints-1"></a><a class="docs-heading-anchor-permalink" href="#)-Define-the-other-model-constraints" title="Permalink"></a></h3><p>Define the <code>resLimit[r in 1:nR]</code> family of contraints, such that when you sum <code>coef[r,a]*x[a]</code> for all the <code>1:nA</code> activities you must have a value not greater than <code>resources.initial[r]</code></p><details><summary>ONE POSSIBLE SOLUTION</summary><pre><code class="language-julia hljs">@constraints profitModel begin
    resLimit[r in 1:nR], # observe resources limits
        sum(coef[r,a]*x[a] for a in 1:nA) &lt;= resources.initial[r]
end</code></pre></details><h3 id=")-Define-the-model&#39;s-objective"><a class="docs-heading-anchor" href="#)-Define-the-model&#39;s-objective">10) Define the model&#39;s objective</a><a id=")-Define-the-model&#39;s-objective-1"></a><a class="docs-heading-anchor-permalink" href="#)-Define-the-model&#39;s-objective" title="Permalink"></a></h3><p>Define the objective as the maximisation of the profit given by summing for each of the <code>1:nA</code> activities <code>activities.gm[a] * x[a]</code></p><details><summary>ONE POSSIBLE SOLUTION</summary><pre><code class="language-julia hljs">@objective profitModel Max begin
    sum(activities.gm[a] * x[a] for a in 1:nA)
end</code></pre></details><h3 id=")-[OPTIONAL]-Print-the-model"><a class="docs-heading-anchor" href="#)-[OPTIONAL]-Print-the-model">11) [OPTIONAL] Print the model</a><a id=")-[OPTIONAL]-Print-the-model-1"></a><a class="docs-heading-anchor-permalink" href="#)-[OPTIONAL]-Print-the-model" title="Permalink"></a></h3><p>Print a human-readable version of the model in order to check it</p><details><summary>ONE POSSIBLE SOLUTION</summary><pre><code class="language-julia hljs">print(profitModel)</code></pre></details><h3 id=")-Optimize-the-model"><a class="docs-heading-anchor" href="#)-Optimize-the-model">12) Optimize the model</a><a id=")-Optimize-the-model-1"></a><a class="docs-heading-anchor-permalink" href="#)-Optimize-the-model" title="Permalink"></a></h3><details><summary>ONE POSSIBLE SOLUTION</summary><pre><code class="language-julia hljs">optimize!(profitModel)</code></pre></details><h3 id=")-Check-the-model-resolution-status"><a class="docs-heading-anchor" href="#)-Check-the-model-resolution-status">13) Check the model resolution status</a><a id=")-Check-the-model-resolution-status-1"></a><a class="docs-heading-anchor-permalink" href="#)-Check-the-model-resolution-status" title="Permalink"></a></h3><p>Check with the function <code>status = termination_status(profitModel)</code> that the status is <code>OPTIMAL</code> (it should be!)</p><details><summary>ONE POSSIBLE SOLUTION</summary><pre><code class="language-julia hljs">status = termination_status(profitModel)</code></pre></details><h3 id=")-Print-the-optimal-levels-of-activities"><a class="docs-heading-anchor" href="#)-Print-the-optimal-levels-of-activities">14) Print the optimal levels of activities</a><a id=")-Print-the-optimal-levels-of-activities-1"></a><a class="docs-heading-anchor-permalink" href="#)-Print-the-optimal-levels-of-activities" title="Permalink"></a></h3><p>Run the following code to print the results (optimal level of activities):</p><pre><code class="language-julia hljs">if (status == MOI.OPTIMAL || status == MOI.LOCALLY_SOLVED || status == MOI.TIME_LIMIT) &amp;&amp; has_values(profitModel)
    println(&quot;#################################################################&quot;)
    if (status == MOI.OPTIMAL)
        println(&quot;** Problem solved correctly **&quot;)
    else
        println(&quot;** Problem returned a (possibly suboptimal) solution **&quot;)
    end
    println(&quot;- Objective value (total costs): &quot;, objective_value(profitModel))
    println(&quot;- Optimal Activities:\n&quot;)
    optValues = value.(x)
    for a in 1:nA
      println(&quot;* $(activities.label[a]):\t $(optValues[a])&quot;)
    end
    if JuMP.has_duals(profitModel)
        println(&quot;\n\n- Shadow prices of the resources:\n&quot;)
        for r in 1:nR
            println(&quot;* $(resources.label[r]):\t $(dual(resLimit[r]))&quot;)
        end
    end
else
    println(&quot;The model was not solved correctly.&quot;)
    println(status)
end</code></pre><h3 id=")-[OPTIONAL]-Observe-the-emergence-of-scale-effects"><a class="docs-heading-anchor" href="#)-[OPTIONAL]-Observe-the-emergence-of-scale-effects">15) [OPTIONAL] Observe the emergence of scale effects</a><a id=")-[OPTIONAL]-Observe-the-emergence-of-scale-effects-1"></a><a class="docs-heading-anchor-permalink" href="#)-[OPTIONAL]-Observe-the-emergence-of-scale-effects" title="Permalink"></a></h3><p>Optionally update the model constraints by using <code>initial2</code> initial resources (instead of <code>initial</code>) and notice how this larger company can afford to perform different types of activities (logging high forest instead of coppices in this example) and obtain a better profitability per unit of resource employed.</p><p>Can you guess which are the aspects of the optimisation model that allow for the emergence of these scale effects?</p><details><summary>ONE POSSIBLE SOLUTION</summary><pre><code class="language-julia hljs">set_normalized_rhs.(resLimit, resources.initial2)
normalized_rhs.(resLimit) # to check the new constraints
optimize!(profitModel)
status = termination_status(profitModel)
if (status == MOI.OPTIMAL || status == MOI.LOCALLY_SOLVED || status == MOI.TIME_LIMIT) &amp;&amp; has_values(profitModel)
    println(&quot;#################################################################&quot;)
    if (status == MOI.OPTIMAL)
        println(&quot;** Problem solved correctly **&quot;)
    else
        println(&quot;** Problem returned a (possibly suboptimal) solution **&quot;)
    end
    println(&quot;- Objective value (total costs): &quot;, objective_value(profitModel))
    println(&quot;- Optimal Activities:\n&quot;)
    optValues = value.(x)
    for a in 1:nA
      println(&quot;* $(activities.label[a]):\t $(optValues[a])&quot;)
    end
    if JuMP.has_duals(profitModel)
        println(&quot;\n\n- Shadow prices of the resources:\n&quot;)
        for r in 1:nR
            println(&quot;* $(resources.label[r]):\t $(dual(resLimit[r]))&quot;)
        end
    end
else
    println(&quot;The model was not solved correctly.&quot;)
    println(status)
end</code></pre></details><hr/><div id="pd_rating_holder_8962705"></div>
<script type="text/javascript">
PDRTJS_settings_8962705 = {
"id" : "8962705",
"unique_id" : "/home/runner/work/SPMLJ/SPMLJ/lessonsSources/02_-_JULIA2_-_Scientific_programming_with_Julia/0202x_EXERCISE-2.2.md",
"title" : "0202x_EXERCISE-2.2.md",
"permalink" : ""
};
</script><div class="addthis_inline_share_toolbox"></div><hr/><script src="https://utteranc.es/client.js"
        repo="sylvaticus/SPMLJ"
        issue-term="title"
        label="ðŸ’¬ website_comment"
        theme="github-dark"
        crossorigin="anonymous"
        async>
</script><script type="text/javascript" charset="utf-8" src="https://polldaddy.com/js/rating/rating.js"></script><!-- Go to www.addthis.com/dashboard to customize your tools -->
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-6256c971c4f745bc"></script></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="0202x_EXERCISE-2.1.html">Â« 0202x EXERCISE-2.1</a><a class="docs-footer-nextpage" href="../03_-_ML1_-_Introduction_to_Machine_Learning/0301_-_Machine_learning_main_concepts.html">0301 - Machine learning main concepts Â»</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.15 on <span class="colophon-date" title="Sunday 1 May 2022 14:55">Sunday 1 May 2022</span>. Using Julia version 1.7.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
